{% extends 'base.html.twig' %}
{% block title %}Jeux
{% endblock %}
{% block body %}
	<div class="col-lg-12 contenu-blanc shadow-lg">
		<h1>Les
			<span>
				{{ lesJeux | length }}
			</span>jeux</h1>
		{{ include('messages.html.twig') }}
		{# formulaire de recherche des produits #}
		{{ form_start(formRecherche) }}
		<div class="container-fluid contenu">
			<div class="row">
				<div class="col-md-8 row font-weight-bold">
					<div class="col-md-6">{{ form_label(formRecherche.libelle) }}</div>
					<div class="col-md-3">{{ form_label(formRecherche.prixMini) }}</div>
					<div class="col-md-3">{{ form_label(formRecherche.prixMaxi) }}</div>
				</div>
			</div>
			<div class="row">
				<div class="col-md-8 row">
					<div class="col-md-6">{{ form_widget(formRecherche.libelle) }}</div>
					<div class="col-md-3">{{ form_widget(formRecherche.prixMini) }}</div>
					<div class="col-md-3">{{ form_widget(formRecherche.prixMaxi) }}</div>
				</div>
				<div class="col-md-4">
					<button class="btn btn-primary btn-sm" type="submit" formaction="{{ path('app_jeux') }}" title="Afficher les jeux vidéo">
						<i class="fa fa-
																																																						save"></i>
						Afficher</button>

					<button class="btn btn-info btn-sm" type="reset" title="Effacer la
																																																						saisie">
						<i class="fa fa-eraser"></i>
						Effacer</button>

				</div>
			</div>
		</div>
		{{ form_end(formRecherche) }}

		<div
			class="container-fluid contenu">

			{# -- formulaire jeux video -- #}

			<table class="table table-striped table-advance table-hover">
				<thead>
					<tr
						class="bg-entete">
						{# <th class="col-md-1">Identifiant</th> #}
						<th>
							<i class="fa fa-bullhorn"></i>
							Référence</th>
						<th>
							<i class="fa fa-bookmark"></i>
							Nom</th>
						<th>
							<i class="fa fa-eur"></i>
							Prix</th>
						<th>
							<i class="fa fa-gamepad"></i>
							Plateforme</th>
						<th>
							<i class="fa fa-gamepad"></i>
							Genre</th>
						<th>
							<i class="fa fa-gamepad"></i>
							Marque</th>

						<th>
							<span class="pull-center">
								<a href="{{ path('app_jeux_ajouter')}}" class="btn btn-primary btn-sm">
									<i class="fa fa-save"></i>
									Ajouter nouveau produit</a>
							</span>
						</th>
					</tr>
				</thead>
				<tbody>
					{% for key, jeux in lesJeux %}
						<tr>
							{# <td>{{ jeux.id }}</td> #}
							<td>{{ jeux.refJeu }}</td>
							<td>{{ jeux.nom }}</td>
							<td>{{ jeux.getPrix() | number_format(2, ',', ' ') }}</td>
							<td>{{ jeux.plateforme.getLibelle()}}</td>
							<td>{{ jeux.genre.getLibelle() }}</td>
							<td>{{ jeux.marque.getNom() }}</td>
							{# formattage date https://stackoverflow.com/questions/8318914/how-to-render-a-datetime-object-in-a-twig-template #}
							<td>{{ jeux.dateParution|date('d/m/y') }}</td>


							<td
								class="row">
								<!-- formulaire pour demander la modification ou la
																																																																																																																																																																																																																																																																																																																																																																																																	suppression -->
								<form>
									<button type="submit" class="btn btn-primary btn-
																																																																																																					sm" formaction="{{ path('app_jeux_modifier', {'id' : jeux.id }) }}" title="Modifier">
										<i class="fa fa-pencil"></i>
										Modifier</button>

									<button type="submit" class="btn btn-danger btn-
																																																																																	sm" formaction="{{path('app_jeux_supprimer', {'id' : jeux.id }) }}" title="Supprimer" onclick="return confirm('Voulez-vous vraiment supprimer ce
																																																																																										produit ?');">
										<i class="fa fa-trash-o "></i>
										Supprimer</button>

									<input
									type="hidden" name="_token" value="{{ csrf_token('action-item' ~ jeux.id) }}">
								{# ~ pour concaténer des chaines en
																																																																																																																																																																																																																																																																																																																																																																																																	twig #}
								</form>
							</td>
						</tr>


					</tbody>
				</tbody>
			</tr>
		{% endfor %}
	</tbody>
</table></div></div>{% endblock %}
